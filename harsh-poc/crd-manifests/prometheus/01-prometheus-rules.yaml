apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  creationTimestamp: null
  labels:
    flask: rules
  name: flask-alert-rules
  namespace: monitoring
spec:
    groups:
    - name: custom-pod-group
      rules:
      - alert: CustomPodCrashLoopBackOff 
        expr: kube_pod_container_status_restarts_total{namespace="default", pod="pod1"} > 5
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Pod {{ $labels.pod }} in namespace {{ $labels.namespace }} is in CrashLoopBackOff state"
          description: "Pod {{ $labels.pod }} in namespace {{ $labels.namespace }} is in CrashLoopBackOff state for more than 1 minutes."
